# Nzeoma Solar - MongoDB API Documentation\n\n## Overview\nThis API provides full CRUD operations for managing solar products in the Nzeoma Solar application. All data is stored in MongoDB with proper validation and error handling.\n\n## Base URL\n```\nhttp://localhost:3000/api\n```\n\n## Product Schema\n\n### Required Fields\n- `name` (string): Product name (1-200 characters)\n- `price` (string): Price in format \"₦X,XXX\"\n- `image` (string): Image URL or path\n- `alt` (string): Alt text for accessibility\n\n### Optional Fields\n- `category` (string): Product category (Fex Solar, KTJ, De Cecon, etc.)\n- `wattage` (number): Power rating (1-5000)\n- `description` (string): Product description (max 1000 chars)\n- `features` (array): Array of feature strings (max 10 items)\n- `inStock` (boolean): Stock availability (default: true)\n- `rating` (number): Product rating (0-5, default: 4.5)\n- `reviews` (number): Review count (default: 0)\n\n### System Fields (Auto-generated)\n- `_id` (ObjectId): MongoDB document ID\n- `id` (string): Custom string ID\n- `createdAt` (Date): Creation timestamp\n- `updatedAt` (Date): Last update timestamp\n\n## API Endpoints\n\n### 1. Get All Products\n```http\nGET /api/products\n```\n\n#### Query Parameters\n- `category` (string): Filter by category\n- `inStock` (boolean): Filter by stock status\n- `minWattage` (number): Minimum wattage filter\n- `maxWattage` (number): Maximum wattage filter\n- `sortBy` (string): Sort order (name, price, wattage, newest, rating)\n- `limit` (number): Max results (default: 100)\n- `skip` (number): Skip results for pagination\n\n#### Response\n```json\n[\n  {\n    \"_id\": \"507f1f77bcf86cd799439011\",\n    \"id\": \"unique-product-id\",\n    \"name\": \"Fex Solar Light 200watts\",\n    \"price\": \"₦35,000\",\n    \"image\": \"/Fex Solar Light 200watts.jpg\",\n    \"alt\": \"Fex Solar Light 200watts\",\n    \"category\": \"Fex Solar\",\n    \"wattage\": 200,\n    \"description\": \"High-efficiency solar light\",\n    \"features\": [\"Solar powered\", \"LED technology\"],\n    \"inStock\": true,\n    \"rating\": 4.5,\n    \"reviews\": 25,\n    \"createdAt\": \"2025-11-21T13:53:53.968Z\",\n    \"updatedAt\": \"2025-11-21T13:53:53.968Z\"\n  }\n]\n```\n\n#### Headers\n- `X-Total-Count`: Total number of products matching filters\n- `Cache-Control`: Caching instructions\n\n### 2. Get Single Product\n```http\nGET /api/products/{id}\n```\n\n#### Response\n```json\n{\n  \"_id\": \"507f1f77bcf86cd799439011\",\n  \"name\": \"Fex Solar Light 200watts\",\n  // ... other fields\n}\n```\n\n#### Error Response (404)\n```json\n{\n  \"error\": \"Product not found\"\n}\n```\n\n### 3. Create Product\n```http\nPOST /api/products\n```\n\n#### Request Body\n```json\n{\n  \"name\": \"New Solar Light\",\n  \"price\": \"₦50,000\",\n  \"image\": \"/new-solar-light.jpg\",\n  \"alt\": \"New Solar Light\",\n  \"category\": \"KTJ\",\n  \"wattage\": 300,\n  \"description\": \"Advanced solar lighting solution\",\n  \"features\": [\"Solar powered\", \"LED technology\", \"Weather resistant\"]\n}\n```\n\n#### Success Response (201)\n```json\n{\n  \"message\": \"Product created successfully\",\n  \"product\": {\n    \"_id\": \"507f1f77bcf86cd799439012\",\n    \"id\": \"generated-unique-id\",\n    \"name\": \"New Solar Light\",\n    // ... other fields including auto-generated timestamps\n  }\n}\n```\n\n#### Error Response (400)\n```json\n{\n  \"error\": \"Validation failed\",\n  \"details\": [\n    \"Name is required and must be a non-empty string\",\n    \"Price must be in format ₦X,XXX with naira symbol\"\n  ]\n}\n```\n\n### 4. Update Product\n```http\nPUT /api/products/{id}\n```\n\n#### Request Body (partial update)\n```json\n{\n  \"price\": \"₦45,000\",\n  \"inStock\": false,\n  \"description\": \"Updated description\"\n}\n```\n\n#### Success Response\n```json\n{\n  \"message\": \"Product updated successfully\",\n  \"product\": {\n    // Updated product object\n  }\n}\n```\n\n### 5. Delete Product\n```http\nDELETE /api/products/{id}\n```\n\n#### Success Response\n```json\n{\n  \"message\": \"Product deleted successfully\",\n  \"deletedId\": \"product-id\",\n  \"deletedCount\": 1\n}\n```\n\n### 6. Bulk Create Products\n```http\nPOST /api/products/bulk\n```\n\n#### Request Body\n```json\n{\n  \"products\": [\n    {\n      \"name\": \"Product 1\",\n      \"price\": \"₦30,000\",\n      // ... other fields\n    },\n    {\n      \"name\": \"Product 2\",\n      \"price\": \"₦40,000\",\n      // ... other fields\n    }\n  ]\n}\n```\n\n#### Response\n```json\n{\n  \"message\": \"Bulk operation completed. 2 products created, 0 errors.\",\n  \"results\": [\n    // Array of created products\n  ],\n  \"errors\": [],\n  \"summary\": {\n    \"totalProcessed\": 2,\n    \"successCount\": 2,\n    \"errorCount\": 0\n  }\n}\n```\n\n### 7. Product Statistics\n```http\nGET /api/products/stats\n```\n\n#### Response\n```json\n{\n  \"statistics\": {\n    \"totalProducts\": 25,\n    \"averageRating\": 4.5,\n    \"totalInStock\": 23,\n    \"categoryBreakdown\": {\n      \"Fex Solar\": 5,\n      \"KTJ\": 9,\n      \"De Cecon\": 4,\n      \"Street Lights\": 3,\n      \"Smart Lights\": 2,\n      \"Industrial\": 1,\n      \"EcoBoost\": 1\n    }\n  },\n  \"generatedAt\": \"2025-11-21T14:30:00.000Z\"\n}\n```\n\n## Error Handling\n\nAll endpoints return consistent error responses:\n\n### Validation Error (400)\n```json\n{\n  \"error\": \"Validation failed\",\n  \"details\": [\"Specific validation messages\"]\n}\n```\n\n### Not Found Error (404)\n```json\n{\n  \"error\": \"Product not found\"\n}\n```\n\n### Conflict Error (409)\n```json\n{\n  \"error\": \"Product with this name already exists\"\n}\n```\n\n### Server Error (500)\n```json\n{\n  \"error\": \"Internal server error\",\n  \"details\": \"Specific error message\"\n}\n```\n\n## Usage Examples\n\n### JavaScript/Frontend Usage\n```javascript\nimport ProductDataManager from '../lib/dataManager';\n\n// Get all products\nconst products = await ProductDataManager.getAllProducts();\n\n// Get products by category\nconst ktjProducts = await ProductDataManager.getProductsByCategory('KTJ');\n\n// Search products\nconst searchResults = await ProductDataManager.searchProducts('200watts');\n\n// Create new product\nconst newProduct = await ProductDataManager.createProduct({\n  name: 'Test Solar Light',\n  price: '₦25,000',\n  image: '/test.jpg',\n  alt: 'Test Solar Light'\n});\n\n// Update product\nconst updated = await ProductDataManager.updateProduct('product-id', {\n  price: '₦30,000'\n});\n\n// Delete product\nawait ProductDataManager.deleteProduct('product-id');\n```\n\n### cURL Examples\n```bash\n# Get all products\ncurl http://localhost:3000/api/products\n\n# Get products with filters\ncurl \"http://localhost:3000/api/products?category=KTJ&inStock=true&sortBy=price\"\n\n# Create product\ncurl -X POST http://localhost:3000/api/products \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"Test Solar Light\",\n    \"price\": \"₦25,000\",\n    \"image\": \"/test.jpg\",\n    \"alt\": \"Test Solar Light\"\n  }'\n\n# Update product\ncurl -X PUT http://localhost:3000/api/products/product-id \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"price\": \"₦30,000\"}'\n\n# Delete product\ncurl -X DELETE http://localhost:3000/api/products/product-id\n```\n\n## Database Information\n\n- **Database**: `nzeoma_solar`\n- **Collection**: `products`\n- **Connection**: MongoDB Atlas (configured via `MONGODB_URI` environment variable)\n- **Indexes**: Automatic indexing on `_id`, consider adding indexes on `category`, `name` for better performance\n\n## Security Notes\n\n1. **Input Validation**: All inputs are validated against schema\n2. **Sanitization**: Data is sanitized before storage\n3. **Error Handling**: Errors don't expose sensitive information\n4. **Rate Limiting**: Consider implementing rate limiting for production\n5. **Authentication**: Consider adding authentication for write operations\n\n## Performance Considerations\n\n1. **Caching**: GET requests include cache headers\n2. **Pagination**: Use `limit` and `skip` for large datasets\n3. **Indexes**: Add database indexes for frequently queried fields\n4. **Bulk Operations**: Use bulk endpoints for multiple operations\n\n---\n\n*Last updated: November 21, 2025*